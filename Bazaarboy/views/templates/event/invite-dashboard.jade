extends ../layout

block title
    | Invite Dashboard

block sidebar
    +sidebarItem('ss-newspaper')(href="{% url 'index' %}")
        | Events
    +sidebarItem('ss-database')(href="{% url 'list:index' %}")
        | Lists
    +sidebarItem('ss-tag')(href="{% url 'reward:index' %}")
        | Gifts
    +sidebarItem('ss-share')(href="{% url 'user:settings' %}")
        | Settings

block header
    div.header-title.large-9.medium-10.columns.small-centered
        div.row.clearfix
            div.icon.left
                span.ss-file
            div.text.left
                | Invitations |
                span.sub &nbsp;{{ event.name }}

block content
    div#wrapper-invite-dashboard.large-9.medium-10.columns.small-centered
        {% if sentInvites.count == 0 and draftInvites.count == 0 %}
        div.empty-state-container
            div.row
                div.medium-5.columns
                    &nbsp;
                div.medium-7.columns.end.empty-state-content
                    div.text YOU HAVEN'T CREATED INVITATIONS YET
                    hr
                    div.subtext Get the word out about your event!
                    div.row
                        div.large-6.medium-7.small-9
                            div.new-list-btn
                                a.create-invite-btn(href="{% if numLists = 0 %}javascript:;{% else %}{% url 'event:create-invite' event.id %}{% endif %}").secondary-btn.btn.full-btn
                                    | <span class="plus">+</span> New Invitation
        {% endif %}
        div#invite-dashboard.small-12.columns
            div.row.new-comm-container(class="{% if listsCount == 0 %}hide{% endif %}")
                div.medium-4.columns.new-list
                    a.create-invite-btn.new-comm-btn.primary-btn.text-center(href="{% if numLists = 0 %}javascript:;{% else %}{% url 'event:create-invite' event.id %}{% endif %}", style="{% if sentInvites.count == 0 and draftInvites.count == 0 %}display:none;{% endif %}") + New Invitation
            div.row
                {% if sentInvites.count > 0 %}
                div.small-12.columns.comms
                    h3.title Sent Invitations
                    {% for invite in sentInvites %}
                    div.row.comm
                        div.small-12.medium-6.columns.comm-name
                            | {{ invite.message|truncatechars:40 }}
                        div.small-12.medium-2.columns.text-right.comm-details
                            | {{ invite.recipients }} Recipien{{ invite.recipients|pluralize:"t,ts" }}
                        div.small-12.medium-2.columns.text-right.comm-details
                            a(href="{% url 'event:invite-details' invite.id %}") View Stats
                        div.small-12.medium-2.columns.text-right.comm-details
                            a.copy-invite(data-id="{{ invite.id }}", href="javascript:;") Copy Invite
                    {% endfor %}
                {% endif %}
                {% if draftInvites.count > 0 %}
                div.small-12.columns.comms
                    h3.title Invitation Drafts
                    {% for invite in draftInvites %}
                    div.row.comm
                        div.small-12.medium-6.columns.comm-name
                            | {{ invite.message|truncatechars:40 }}
                        div.small-12.medium-3.columns.text-right.comm-details
                            a(href="{% url 'event:edit-invite' invite.id %}") Edit Invite
                        div.small-12.medium-3.columns.text-right.comm-details
                            a.delete-invite(href="javascript:;", data-id="{{ invite.id }}") Delete Invite
                    {% endfor %}
                {% endif %}
    div#new-list-modal.reveal-modal.medium(data-reveal)
        div.row.new-list-title
            div.small-12.columns
                h3 Give Your List a Name
        div.row.new-list-inputs
            div.medium-8.small-12.columns
                input(name="list_name", placeholder="List Name (required)")
            div.small-12.medium-4.columns
                a.create-list.primary-btn(href="javascript:;") + Add New List
        div.row.new-list-cancel
            div.small-12.medium-4.medium-offset-8.columns.text-center
                a.close-list-modal(href="javascript:;") Cancel Adding List

append script
    script(src="{{ STATIC_URL }}js/event/invite-dashboard.js")
    script.
        numLists = {{ numLists }};
        profileId = {{ profile.id }};
        eventId = {{ event.id }};